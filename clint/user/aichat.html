<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./../../server/static/pngwing.com.png" type="image/x-icon">
    <title>زهور الربيع - المساعد الذكي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
    /* General Styles */
    @import url('https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&display=swap');

    :root {
        --primary-color: #ffbf00;   /* Amber */
        --secondary-color: #6f0e8f; /* Dark Purple */
        --secondary-color2: #8c8c8c; /* Medium Grey */
        --light-grey: #f4f4f4;      /* Light Grey Background */
        --white: #f4f4f4;           /* White */
        --color1: #ff4444;          /* Red */
        --color2: #35c528;          /* Green */
        --color3: #52008c;          /* Darker Purple for buttons */
        --text-color: #bf6f00;      /* Amber Text */
        --border-radius: 8px;       /* Standard Border Radius */
        
        /* Base font size for desktop */
        font-size: 16px;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Almarai', sans-serif;
        background-color: var(--white);
        color: var(--text-color);
        line-height: 1.6;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        padding: 0;
    }

    a {
        text-decoration: none;
        color: var(--primary-color);
    }

    button {
        cursor: pointer;
        border: none;
        background-color: transparent;
        color: inherit;
        font-size: inherit;
    }

    /* --- Navbar (Top Header) --- */
    .navbar {
        background-color: var(--secondary-color);
        color: var(--primary-color);
        padding: 1rem;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: center;
        border-bottom-left-radius: 30px;
        border-bottom-right-radius: 30px;
    }

    .navbar .brand-name {
        font-weight: bold;
        color: var(--primary-color);
        font-size: 1.5rem;
    }

    /* --- Chatbot Specific Styles --- */
    .chatbot-container {
        width: 100%;
        flex-grow: 1;
        margin: 0 auto;
        max-width: 1200px;
        border-radius: 0;
        box-shadow: none;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    .chat-messages {
        flex-grow: 1;
        padding: 1rem;
        overflow-y: auto;
        background-color: var(--light-grey);
        padding-bottom: 6rem;
    }

    .message {
        margin-bottom: 1rem;
        display: flex;
        align-items: flex-start;
    }

    .message.bot {
        justify-content: flex-start;
    }

    .message.bot .message-bubble {
        background-color: var(--secondary-color);
        color: var(--white);
        border-bottom-right-radius: 0;
        margin-right: 0;
        margin-left: 0.5rem;
    }

    .message.user {
        justify-content: flex-end;
    }

    .message.user .message-bubble {
        background-color: var(--primary-color);
        color: var(--secondary-color);
        border-bottom-left-radius: 0;
    }

    .message-bubble {
        padding: 0.8rem 1.2rem;
        border-radius: 1.25rem;
        max-width: 80%;
        word-wrap: break-word;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        font-size: 1rem;
        line-height: 1.5;
    }

    /* Robot Avatar Specific Styles */
    .bot-avatar {
        width: 4rem;
        height: 4rem;
        object-fit: contain;
        flex-shrink: 0;
        box-shadow: none;
        animation: float 2s ease-in-out infinite;
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }

    /* Fixed Chat Options at the bottom */
    .chat-options {
        padding: 0.8rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
        justify-content: center;
        background-color: var(--white);
        border-top: 1px solid #eee;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        border-top: 1px solid #ddd;
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.08);
    }

    .chat-option-button {
        background-color: var(--color3);
        color: var(--white);
        padding: 0.8rem 1rem;
        border-radius: 1.5rem;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        text-align: center;
        white-space: nowrap;
        flex: 1 1 auto;
        min-width: 45%;
        max-width: 100%;
    }

    .chat-option-button:hover {
        background-color: var(--primary-color);
        color: var(--secondary-color);
        transform: translateY(-2px);
    }

    .chat-option-button:active {
        transform: translateY(0);
    }

    /* --- Responsive adjustments for different screen sizes --- */

    /* شاشات كبيرة جداً (مثل شاشات سطح المكتب الواسعة) */
    @media (min-width: 1200px) {
        :root {
            font-size: 18px;
        }
        
        .chatbot-container {
            border-radius: var(--border-radius);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .bot-avatar {
            width: 5rem;
            height: 5rem;
        }

        .navbar .brand-name {
            font-size: 1.8rem;
        }
        
        .chat-option-button {
            min-width: 120px;
            max-width: 250px;
        }
    }

    /* شاشات متوسطة (أجهزة لوحية وأجهزة كمبيوتر محمولة صغيرة) */
    @media (max-width: 992px) {
        :root {
            font-size: 16px;
        }
        
        .navbar .brand-name {
            font-size: 1.4rem;
        }

        .bot-avatar {
            width: 4.5rem;
            height: 4.5rem;
        }

        .chat-messages {
            padding-bottom: 7rem;
        }

        .chat-option-button {
            font-size: 0.95rem;
            padding: 0.7rem 0.9rem;
        }
    }

    /* شاشات صغيرة (الهواتف الذكية) */
    @media (max-width: 768px) {
        :root {
            font-size: 18px; /* زيادة حجم الخط الأساسي للهواتف */
        }
        
        body {
            padding: 0;
        }

        .navbar {
            padding: 0.8rem;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .navbar .brand-name {
            font-size: 1.3rem;
        }

        .chatbot-container {
            margin-top: 0;
            margin-bottom: 0;
        }

        .chat-messages {
            padding: 0.8rem;
            padding-bottom: 8rem; /* مساحة أكبر للأزرار في الأسفل */
        }

        .message-bubble {
            padding: 0.7rem 1rem;
            font-size: 1rem;
            max-width: 85%;
        }

        .bot-avatar {
            width: 4rem;
            height: 4rem;
        }

        .chat-options {
            padding: 0.6rem;
            gap: 0.5rem;
        }

        .chat-option-button {
            font-size: 1rem;
            padding: 0.8rem;
            min-width: 45%;
            border-radius: 1.5rem;
        }
    }

    /* شاشات صغيرة جداً (بعض الهواتف القديمة) */
    @media (max-width: 480px) {
        :root {
            font-size: 16px;
        }
        
        .chat-messages {
            padding-bottom: 8.5rem;
        }

        .chat-option-button {
            font-size: 0.9rem;
            padding: 0.7rem;
            min-width: 100%;
        }

        .bot-avatar {
            width: 3.5rem;
            height: 3.5rem;
        }
        
        .message-bubble {
            font-size: 0.95rem;
        }
    }

    /* Styling for the specific image path (if used in messages) */
    img[src="./../../server/static/images/4.png"] {
        max-width: 100%;
        height: auto;
        border-radius: var(--border-radius);
        margin-top: 10px;
    }
</style>
</head>
<body>
    <!-- باقي الكود كما هو بدون تغيير -->
    <header class="navbar">
        <div class="brand-name">الرد الذكي - زهور الربيع</div>
    </header>

    <main class="content">
        <section class="chatbot-container">
            <div class="chat-messages" id="chat-messages">
                </div>
            <div class="chat-options" id="chat-options">
                </div>
        </section>
    </main>

    <script>
        // باقي الكود JavaScript كما هو بدون تغيير
        const chatMessages = document.getElementById('chat-messages');
        const chatOptions = document.getElementById('chat-options');

        // Stores the current state of the conversation
        let conversationState = 'initial';

        // Defines the conversation flow and responses

const chatData = {
    initial: {
        message: 'أهلاً بك في زهور الربيع! كيف يمكنني مساعدتك اليوم؟',
        options: [
            { text: 'معلومات عن المتجر', nextState: 'storeInfo' },
            { text: 'استفسار عن الورد', nextState: 'flowerInquiry' },
            { text: 'خدمة العملاء', nextState: 'customerService' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    storeInfo: {
        message: 'ما الذي تود معرفته عن متجرنا؟',
        options: [
            { text: 'أيام العمل', nextState: 'workingDays' },
            { text: 'مواعيد العمل', nextState: 'workingHours' },
            { text: 'عنوان المتجر', nextState: 'address' },
            { text: 'خدمة التوصيل', nextState: 'delivery' },
            { text: 'من نحن', nextState: 'aboutUs' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    workingDays: {
        message: 'نحن نعمل طوال أيام الأسبوع باستثناء الجمعة، من السبت إلى الخميس.',
        options: [
            { text: 'مواعيد العمل', nextState: 'workingHours' },
            { text: 'عنوان المتجر', nextState: 'address' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    workingHours: {
        message: 'ساعات العمل لدينا من 9 صباحًا حتى 10 مساءً يوميًا.',
        options: [
            { text: 'أيام العمل', nextState: 'workingDays' },
            { text: 'عنوان المتجر', nextState: 'address' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    address: {
        message: 'متجر زهور الربيع يقع في: الجيزة، شارع الهرم الرئيسي، بجوار كافيه النخيل. نحن بانتظارك!',
        options: [
            { text: 'أيام العمل', nextState: 'workingDays' },
            { text: 'مواعيد العمل', nextState: 'workingHours' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    delivery: {
        message: 'نقدم خدمة التوصيل لجميع أنحاء الجيزة والقاهرة الكبرى. تكلفة التوصيل تعتمد على المسافة. هل لديك استفسار عن منطقة معينة؟',
        options: [
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    aboutUs: {
        message: 'زهور الربيع هو وجهتك المثالية لأجمل الزهور والنباتات والهدايا. نلتزم بتقديم أجود المنتجات وأفضل خدمة عملاء، لجعل لحظاتكم السعيدة أكثر إشراقًا. مهمتنا هي إلهام السعادة والجمال من خلال منتجاتنا وخدماتنا الفريدة.',
        options: [
            { text: 'مهمتنا', nextState: 'ourMission' },
            { text: 'رؤيتنا', nextState: 'ourVision' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    ourMission: {
        message: 'مهمتنا: تقديم أجود الزهور والنباتات والهدايا مع خدمة عملاء استثنائية.',
        options: [
            { text: 'رؤيتنا', nextState: 'ourVision' },
            { text: 'العودة لـ من نحن', nextState: 'aboutUs' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    ourVision: {
        message: 'رؤيتنا: أن نكون المتجر الرائد للزهور في المنطقة، معروفين بإبداعنا وجودتنا.',
        options: [
            { text: 'مهمتنا', nextState: 'ourMission' },
            { text: 'العودة لـ من نحن', nextState: 'aboutUs' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    flowerInquiry: {
        message: 'يسعدنا مساعدتك! ما هو نوع الورد الذي تبحث عنه أو المناسبة التي تحتاج لورد لها؟',
        options: [
            { text: 'ورد طبيعي', nextState: 'naturalFlowers' },
            { text: 'ورد صناعي', nextState: 'artificialFlowers' },
            { text: 'مجففات', nextState: 'driedFlowers' },
            { text: 'باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'هدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    naturalFlowers: {
        message: 'لدينا تشكيلة رائعة من الورد الطبيعي الطازج! مثل: الورود، الزنابق، التوليب، الجوري، وعباد الشمس. ما النوع المفضل لديك؟',
        options: [
            { text: 'ورد طبيعي', nextState: 'specificNaturalFlowers' },
            { text: 'العودة للاستفسار عن الورد', nextState: 'flowerInquiry' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    specificNaturalFlowers: {
        message: 'لدينا: ورود حمراء، زنابق بيضاء، توليب بألوان مختلفة، جوري، وعباد الشمس. أي نوع تود الاستفسار عنه؟',
        options: [
            { text: 'الورود الحمراء', nextState: 'redRosesInfo' },
            { text: 'الزنابق البيضاء', nextState: 'whiteLiliesInfo' },
            { text: 'العودة لـ ورد طبيعي', nextState: 'naturalFlowers' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    redRosesInfo: {
        message: 'الورود الحمراء رمز الحب والعاطفة! لدينا باقات متنوعة تبدأ من 150 جنيه. هل تود معرفة المزيد عن الأحجام أو طلب خاص؟',
        options: [
            { text: 'أحجام الباقات', nextState: 'bouquetSizes' },
            { text: 'طلب باقة خاصة', nextState: 'specialOrder' },
            { text: 'العودة لـ ورد طبيعي', nextState: 'naturalFlowers' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    whiteLiliesInfo: {
        message: 'الزنابق البيضاء مثالية للنقاء والاحتفالات الهادئة. تتوفر لدينا بأحجام مختلفة وأسعار تبدأ من 200 جنيه. هل تحتاج صور أو تفاصيل إضافية؟',
        options: [
            { text: 'العودة لـ ورد طبيعي', nextState: 'naturalFlowers' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    bouquetSizes: {
        message: 'لدينا باقات صغيرة، متوسطة، وكبيرة، بالإضافة لإمكانية تصميم باقة حسب رغبتك.',
        options: [
            { text: 'طلب باقة خاصة', nextState: 'specialOrder' },
            { text: 'العودة لـ ورد طبيعي', nextState: 'naturalFlowers' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    specialOrder: {
        message: 'لطلب باقة خاصة، يرجى التواصل معنا مباشرة على الرقم: 01xxxxxxxxx أو زيارة المتجر لنتحدث عن تصميمك المثالي.',
        options: [
            { text: 'العودة لـ أحجام الباقات', nextState: 'bouquetSizes' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    artificialFlowers: {
        message: 'الورد الصناعي لدينا بجودة عالية ومظهر طبيعي يدوم طويلاً! لدينا ورود، أوركيد، ونباتات زينة صناعية. هل تبحث عن شيء معين؟',
        options: [
            { text: 'ورد فراشات', nextState: 'butterflyRoses' },
            { text: 'ورد ساتان', nextState: 'satinRoses' },
            { text: 'العودة للاستفسار عن الورد', nextState: 'flowerInquiry' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    butterflyRoses: {
        message: 'لدينا تشكيلة مميزة من ورد الفراشات الصناعي بألوان وأحجام مختلفة لإضافة لمسة جمالية فريدة.',
        options: [
            { text: 'العودة لـ ورد صناعي', nextState: 'artificialFlowers' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    satinRoses: {
        message: 'الورد الساتان الصناعي يتميز بجماله وأناقته، مثالي للديكورات الراقية والباقات التي تدوم طويلاً.',
        options: [
            { text: 'العودة لـ ورد صناعي', nextState: 'artificialFlowers' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    driedFlowers: {
        message: 'لدينا مجففات أنيقة تدوم طويلاً وتضيف لمسة جمالية فريدة لديكور منزلك أو مكتبك.',
        options: [
            { text: 'العودة للاستفسار عن الورد', nextState: 'flowerInquiry' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    occasionBouquets: {
        message: 'لدينا باقات مصممة خصيصًا لكل مناسبة! ما هي مناسبتك؟',
        options: [
            { text: 'قراءة فاتحة', nextState: 'engagementReadingBouquets' },
            { text: 'خطوبة', nextState: 'engagementBouquets' },
            { text: 'عيد ميلاد', nextState: 'birthdayBouquets' },
            { text: 'ذكرى سنوية', nextState: 'anniversaryBouquets' },
            { text: 'تخرج', nextState: 'graduationBouquets' },
            { text: 'مولود جديد', nextState: 'newbornBouquets' },
            { text: 'حب', nextState: 'loveBouquets' },
            { text: 'تهنئة/نجاح', nextState: 'congratulationsBouquets' },
            { text: 'افتتاح', nextState: 'openingBouquets' },
            { text: 'العودة للاستفسار عن الورد', nextState: 'flowerInquiry' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    engagementReadingBouquets: {
        message: 'باقات قراءة الفاتحة تتميز بالأناقة والرقة، ونصممها لتناسب هذه المناسبة الخاصة.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    engagementBouquets: {
        message: 'باقات الخطوبة لدينا مصممة خصيصًا لتعبر عن الفرحة والاحتفال بهذه اللحظة السعيدة.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    birthdayBouquets: {
        message: 'لباقات أعياد الميلاد، نقدم تصميمات مبهجة بألوان زاهية وأنواع ورد متنوعة تناسب كل الأذواق. يمكننا إضافة بطاقة معايدة وهدايا صغيرة.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    anniversaryBouquets: {
        message: 'لباقات الذكرى السنوية، نصمم باقات رومانسية وأنيقة تعبر عن الحب والتقدير المستمر.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    graduationBouquets: {
        message: 'احتفل بلحظات التخرج مع باقاتنا المبهجة والمصممة خصيصًا لهذه المناسبة الهامة.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    newbornBouquets: {
        message: 'لباقات المولود الجديد، لدينا تصميمات رقيقة بألوان ناعمة ومبهجة لتهنئة الأهل بالوافد الجديد.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    loveBouquets: {
        message: 'عبر عن مشاعرك بأجمل باقات الحب، المصممة خصيصًا لتعبر عن أعمق العواطف.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    congratulationsBouquets: {
        message: 'لباقات التهنئة والنجاح، لدينا خيارات راقية تعبر عن الفرح والتقدير. يمكننا تنسيق ألوان محددة حسب طلبك.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    openingBouquets: {
        message: 'لباقات الافتتاح، نقدم تصميمات فخمة ومميزة تناسب المناسبات الرسمية وافتتاحات الأعمال.',
        options: [
            { text: 'العودة لـ باقات المناسبات', nextState: 'occasionBouquets' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    giftsSelection: {
        message: 'لدينا تشكيلة رائعة من الهدايا لتكمل باقتك أو تقدمها بمفردها. ماذا تود أن ترى؟',
        options: [
            { text: 'بوكس', nextState: 'giftBox' },
            { text: 'دب', nextState: 'bearGift' },
            { text: 'شنطة هدايا', nextState: 'giftBag' },
            { text: 'كاسات', nextState: 'glassesGift' },
            { text: 'بالونات', nextState: 'balloonsGift' },
            { text: 'بوكس ورد وشوكولاتة', nextState: 'roseChocBox' },
            { text: 'العودة للاستفسار عن الورد', nextState: 'flowerInquiry' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    giftBox: {
        message: 'تتوفر لدينا بوكسات هدايا أنيقة ومتنوعة، يمكن تنسيقها مع الورد أو الهدايا الأخرى.',
        options: [
            { text: 'العودة لـ الهدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    bearGift: {
        message: 'لدينا دباديب بأحجام وألوان مختلفة، هدية لطيفة ومميزة لكل الأعمار.',
        options: [
            { text: 'العودة لـ الهدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    giftBag: {
        message: 'شنط هدايا بتصاميم جذابة وأحجام متنوعة لتناسب جميع هداياك.',
        options: [
            { text: 'العودة لـ الهدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    glassesGift: {
        message: 'كاسات أنيقة ومميزة، مثالية كهدية أو لإضافة لمسة جمالية لطاولتك.',
        options: [
            { text: 'العودة لـ الهدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    balloonsGift: {
        message: 'بالونات بألوان وأشكال مختلفة لتضفي جوًا من البهجة على مناسبتك.',
        options: [
            { text: 'العودة لـ الهدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    roseChocBox: {
        message: 'بوكسات ورد وشوكولاتة، هدية فاخرة تجمع بين جمال الورد ومذاق الشوكولاتة اللذيذ.',
        options: [
            { text: 'العودة لـ الهدايا', nextState: 'giftsSelection' },
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    customerService: {
        message: 'للتحدث مع ممثل خدمة العملاء، يرجى الاتصال على الرقم: 01xxxxxxxxx خلال مواعيد العمل، أو إرسال بريد إلكتروني إلى info@zohouralrabea.com وسنقوم بالرد عليك في أقرب وقت ممكن.',
        options: [
            { text: 'العودة للقائمة الرئيسية', nextState: 'initial' }
        ]
    },
    // Add more states and messages as needed
};
      

        // Function to add a message to the chat display
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender);

            // Add robot avatar for bot messages
            if (sender === 'bot') {
                const botAvatar = document.createElement('img');
                botAvatar.src = './../../server/static/images/4.png';
                botAvatar.alt = 'Bot Avatar';
                botAvatar.classList.add('bot-avatar');
                messageDiv.appendChild(botAvatar);
            }

            const messageBubble = document.createElement('div');
            messageBubble.classList.add('message-bubble');
            messageBubble.textContent = text;
            messageDiv.appendChild(messageBubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to display the available options as buttons
        function displayOptions(options) {
            chatOptions.innerHTML = '';
            options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('chat-option-button');
                button.textContent = option.text;
                button.onclick = () => handleUserChoice(option.nextState, option.text);
                chatOptions.appendChild(button);
            });
        }

        // Handles user's choice and updates the conversation
        function handleUserChoice(nextState, userMessageText) {
            addMessage(userMessageText, 'user');
            conversationState = nextState;

            setTimeout(() => {
                const botResponse = chatData[conversationState];
                if (botResponse) {
                    addMessage(botResponse.message, 'bot');
                    displayOptions(botResponse.options);
                } else {
                    addMessage('عذراً، لا أفهم طلبك. الرجاء اختيار من الخيارات المتاحة.', 'bot');
                    displayOptions(chatData.initial.options);
                    conversationState = 'initial';
                }
            }, 500);
        }

        // Initializes the chat when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Add welcome message with a slight delay for better UX
            setTimeout(() => {
                addMessage(chatData.initial.message, 'bot');
                displayOptions(chatData.initial.options);
            }, 300);
        });
    </script>
</body>
</html>