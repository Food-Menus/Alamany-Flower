<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./../../server/static/images/logoIcon.jpg" type="image/x-icon">
    <title>زهور الربيع - الصفحة الرئيسية </title>
    <link rel="stylesheet" href="./server/static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {

            --border-color: #e0e0e0;
            --shadow-light: rgba(0, 0, 0, 0.05);
            --shadow-medium: rgba(0, 0, 0, 0.1);
            --card-button-bg-add: #35c528; /* Original green for add to cart */
            --card-button-bg-wish:#ff4444; /* Primary color for wishlist */
            
        }
        .special-offers {
            position: relative;
            max-width: 800px;
            margin: auto;
            border-radius: 20%;

        }

        .offers-carousel {
            display: flex;
            overflow: hidden;
            width: 100%;
            border-radius: 8%;

        }

        .offer-slide {
            min-width: 100%;
            transition: transform 0.5s ease-in-out;
            position: relative;

        }

        .offer-slide img {
            width: 100%;
            height: 300px; /* تقليل طول الصورة */
            object-fit: cover;


        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.321); /* خلفية مظللة للنص */
            color: white;
            text-align: center;
        }

        .carousel-controls {
            text-align: center;
            margin-top: 10px;
        }

        .indicator {
            cursor: pointer;
            display: inline-block;
            width: 10px;
            height: 10px;
            background-color: gray;
            border-radius: 50%;
            margin: 0 5px;
        }

        .indicator.active {
            background-color: black;
        }
        .offers-carousel {
            position: relative; /* تعيينها على أنها نسبية */
            width: 100%; /* ضمان أن العرض 100% */
            height: 300px; /* تعيين ارتفاع مناسب */
        }

        .offer-slide {
            position: absolute; /* تعيينها على أنها مطلقة */
            width: 100%; /* ضمان أن العرض 100% */
            height: 100%; /* ضمان أن الارتفاع 100% */
            opacity: 0; /* البدء بالاختفاء */
            transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out; /* تأثير الانتقال */
        }

        .offer-slide.active {
            opacity: 1; /* جعل الشريحة النشطة مرئية */
            transform: translateX(0); /* تعيين موضع الشريحة النشطة */
        }

        .offer-slide.slide-left {
            transform: translateX(-100%); /* تحريك الشريحة نحو اليسار */
        }

        .offer-slide.slide-right {
            transform: translateX(100%); /* تحريك الشريحة نحو اليمين */
        }



        .category-item {
            opacity: 0; /* البدء بالاختفاء */
            transform: translateY(20px); /* تحريك الزر للأسفل */
            transition: opacity 1s ease, transform 1s ease; /* تأثير الانتقال */
        }

        .category-item.show {
            opacity: 1; /* جعل الزر مرئي */
            transform: translateY(0); /* إعادة الزر إلى موضعه */
        }








               /* حاوية رئيسية للعرض الخاص */
        /* حاوية رئيسية للعرض الخاص */
        .special-products-section {
            padding: 20px;
            max-width: 1200px;
            margin: 20px auto; /* توسيط القسم */
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow-light);
            text-align: center; /* لتوسيط العنوان */
        }

        .special-products-section h2 {
            text-align: center;
            color: var(--secondary-color);
            margin-bottom: 30px;
            font-size: 2.2em;
            position: relative;
        }
        .special-products-section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 50%;
            transform: translateX(50%);
            width: 60px;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }

        /* --- Products Grid (تأكد من 2 عمود على الشاشات الكبيرة) --- */
        .products-grid {
            display: grid;
            /* افتراضيا لعمودين على الشاشات المتوسطة والكبيرة */
            grid-template-columns: repeat(2, 1fr); 
            gap: 20px; /* مسافة بين الكروت */
            justify-items: center;
            max-width: 800px; /* عرض أقصى للشبكة لـ 2x2 بشكل مثالي */
            margin-left: auto;
            margin-right: auto;
            padding: 10px;
        }

        /* على الشاشات الصغيرة جداً، عمود واحد */
        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: 4fr; /* عمود واحد على الشاشات الصغيرة */
                padding: 5px;
            }
            .product-card {
                max-width: 95%; /* السماح للكروت بأخذ عرض أكبر */
            }
            .special-products-section {
                padding: 10px;
                margin: 10px auto;
            }

            
            
        }


        .product-card {
            background-color: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 10px; /* حواف أكثر نعومة */
            overflow: hidden;
            box-shadow: 0 4px 12px var(--shadow-light); /* ظل ناعم */
            text-align: center;
            padding: 15px; /* زيادة الهامش الداخلي */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 100%;
            max-width: 380px; /* عرض أقصى متناسق للكروت */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow-medium);
        }

        .product-card img {
            max-width: 100%;
            height: 180px; /* ارتفاع ثابت للصورة */
            object-fit: cover;
            border-radius: 8px; /* حواف الصورة ناعمة */
            box-shadow: 0 2px 6px var(--shadow-light);
            margin-bottom: 10px; /* مسافة أسفل الصورة */
        }

        .product-card h3 {
            font-size: 1.2em; /* عنوان أكبر قليلاً */
            color: var(--secondary-color);
            margin-bottom: 8px; /* مسافة أسفل العنوان */
            min-height: 40px; /* ضمان ارتفاع متناسق للعناوين */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .product-card p {
            font-size: 0.95em;
            color: var(--secondary-color2);
            margin-bottom: 5px; /* مسافة أسفل الوصف */
            min-height: 40px; /* ضمان ارتفاع متناسق للوصف */
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* الأسعار */
        .prices-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: baseline;
            margin-bottom: 15px; /* مسافة أسفل الأسعار */
            padding: 5px 0;
        }

        .old-price {
            text-decoration: line-through;
            color: var(--secondary-color2);
            font-size: 0.9em;
            margin-left: 8px;
            white-space: nowrap;
        }

        .current-price {
            font-size: 1.4em; /* سعر حالي أكبر قليلاً */
            color: var(--primary-color);
            font-weight: bold;
            white-space: nowrap;
        }

        /* أزرار الإجراءات */
        .actions {
            display: flex;
            gap: 10px; /* مسافة أكبر بين الأزرار */
            margin-top: auto; /* دفع الأزرار لأسفل الكارت */
            padding-top: 10px; /* هامش علوي فوق الأزرار */
        }

        .add-to-cart-btn,
        .add-to-wishlist-btn { 
            color: var(--white);
            padding: 10px 15px; 
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: background-color 0.3s ease, transform 0.2s ease;
            flex-grow: 1;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-to-cart-btn {
            background-color: var(--card-button-bg-add);
        }
        .add-to-cart-btn:hover {
            background-color: #218838; 
            transform: translateY(-2px);
        }

        .add-to-wishlist-btn {
            background-color: var(--card-button-bg-wish);
        }
        .add-to-wishlist-btn:hover {
            background-color: #cc3333; 
            transform: translateY(-2px);
        }
        .add-to-cart-btn i,
        .add-to-wishlist-btn i {
            font-size: 1.1em;
        }

        .no-products-message {
            text-align: center;
            font-size: 1.3em;
            color: var(--secondary-color2);
            margin-top: 50px;
            grid-column: 1 / -1; 
            padding: 20px;
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: 0 2px 10px var(--shadow-light);
        }

        .loading-spinner {
            border: 5px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 60px auto;
            display: block;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1em;
            font-weight: bold;
        }
        .message.error {
            background-color: #fcebeb;
            color: #d8000c;
            border: 1px solid #d8000c;
        }
        
        /* CSS for the success/error toast message */
        .toast-message {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            padding: 16px;
            position: fixed;
            z-index: 1000; 
            left: 50%;
            transform: translateX(-50%);
            bottom: 30px; 
            font-size: 17px;
            opacity: 0;
            transition: visibility 0s, opacity 0.5s linear;
        }

        .toast-message.show {
            visibility: visible;
            opacity: 1;
        }

        .toast-message.success {
            background-color: #4CAF50; 
        }

        .toast-message.error {
            background-color: #f44336; 
        }
    </style>
</head>
<body>

<!-- ##################################################################################################### -->
    <header class="navbar"><div class="brand-name" data-translate-key="brandName">زهور الربيع</div><br>
    </header>
<!-- ##################################################################################################### -->


    <main class="content">

        <section class="special-offers">
            <h2 data-translate-key="beautifulFlowersOccasions">أجمل زهور لأروع المناسبات</h2>
            <div class="offers-carousel">

                <div class="offer-slide active">
                    <div class="overlay">
                        <h1 data-translate-key="engagementReading">قراءة فاتحة</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('قراءة فاتحة')">قراءة فاتحة</button>
                    </div>
                    <img src="./server/static/images/قرائة فتحه.jpg" alt="قراءة فاتحة">
                </div>
                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="engagement">خطوبة</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('خطوبة')">خطوبة</button>
                    </div>
                    <img src="./server/static/images/خطوبة.jpg" alt="خطوبة">
                </div>

                <div class="offer-slide ">
                    <div class="overlay">
                        <h1 data-translate-key="congratulations">ألف مبروك</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('ألف مبروك')">ألف مبروك</button>
                    </div>
                    <img src="./server/static/images/الفمبروك.jpg" alt="ألف مبروك">
                </div>
                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="opening">افتتاح</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('افتتاح')">افتتاح</button>
                    </div>
                    <img src="./server/static/images/افتتاح.jpg" alt="افتتاح">
                </div>
                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="birthday">عيد ميلاد</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('عيد ميلاد')">عيد ميلاد</button>
                    </div>
                    <img src="./server/static/images/عيد ميلاد.jpg" alt="عيد ميلاد">
                </div>


                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="anniversary">ذكرى سنوية</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('ذكرى سنوية')">ذكرى سنوية</button>
                    </div>
                    <img src="./server/static/images/ذكرى.jpg" alt="ذكرى سنوية">
                </div>

                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="graduation">تخرج</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('تخرج')">تخرج</button>
                    </div>
                    <img src="./server/static/images/تخرج.jpg" alt="تخرج">
                </div>
                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="newborn">مولود جديد</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('مولود جديد')">مولود جديد</button>
                    </div>
                    <img src="./server/static/images/مولود.jpg" alt="مولود جديد">
                </div>
                <div class="offer-slide">
                    <div class="overlay">
                        <h1 data-translate-key="love">حب</h1><br>
                        <p data-translate-key="wideSelectionFlowers">تشكيلة واسعة من الزهور لكل مناسبة.</p><br>
                        <button class="action-button" data-translate-key="clickHere" onclick="redirectToStoreWithFilter('حب')">حب</button>
                    </div>
                    <img src="./server/static/images/حب.jpg" alt="حب">
                </div>

            </div>

            <div class="carousel-controls">
                <span class="indicator active" data-slide="0"></span>
                <span class="indicator" data-slide="1"></span>
                <span class="indicator" data-slide="2"></span>
                <span class="indicator" data-slide="3"></span>
                <span class="indicator" data-slide="4"></span>
                <span class="indicator" data-slide="5"></span>
                <span class="indicator" data-slide="6"></span>
                <span class="indicator" data-slide="7"></span>
                <span class="indicator" data-slide="8"></span>
            </div>
        </section>

        <section class="ads-section">
            <div class="ad-container">
                <img src="./server/static/Cover Image.png" alt="إعلان 1">
                <img src="./server/static/Cover Image.png" alt="إعلان 2">
            </div>
        </section>

        <section class="categories-section">
            <h2 data-translate-key="pickYourFlower"> اختر وردتك </h2>
            <div class="categories-grid">
                <button class="category-item" onclick="redirectToProducts('ورد طبيعي')">
                    <i class="fas fa-seedling"></i> <span data-translate-key="naturalRoses">ورد طبيعي</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('ورد صناعي')">
                    <i class="fas fa-leaf"></i> <span data-translate-key="artificialRoses">ورد صناعي</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('ورد فراشات')">
                    <i class="fas fa-feather-alt"></i><span data-translate-key="butterflyRoses">ورد فراشات</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('ورد ساتان')">
                    <i class="fas fa-ribbon"></i> <span data-translate-key="satinRoses">ورد ساتان</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('مجففات')">
                    <i class="fas fa-spa"></i> <span data-translate-key="driedFlowers">مجففات</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('هدايا')">
                    <i class="fas fa-gift"></i> <span data-translate-key="giftsAlias">هدايا</span>
                </button>
            </div>
        </section>

        <section class="categories-section">
            <h2 data-translate-key="chooseYourOccasion"> اختر حسب مناسبتك </h2>
            <div class="categories-grid">
                <button class="category-item" onclick="redirectToStoreWithFilter('قراءة فاتحة')">
                    <i class="fas fa-handshake"></i> <span data-translate-key="engagementReading">قراءة فاتحة</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('خطوبة')">
                    <i class="fas fa-ring"></i> <span data-translate-key="engagement">خطوبة</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('ألف مبروك')">
                    <i class="fas fa-award"></i> <span data-translate-key="congratulations">ألف مبروك</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('افتتاح')">
                    <i class="fas fa-store-alt"></i> <span data-translate-key="opening">افتتاح</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('عيد ميلاد')">
                    <i class="fas fa-birthday-cake"></i> <span data-translate-key="birthday">عيد ميلاد</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('ذكرى سنوية')">
                    <i class="fas fa-calendar-alt"></i> <span data-translate-key="anniversary">ذكرى سنوية</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('تخرج')">
                    <i class="fas fa-graduation-cap"></i> <span data-translate-key="graduation">تخرج</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('مولود جديد')">
                    <i class="fas fa-baby"></i> <span data-translate-key="newborn">مولود جديد</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('حب')">
                    <i class="fas fa-heart"></i> <span data-translate-key="love">حب</span>
                </button>
            </div>
        </section>

        <section class="categories-section">
            <h2 data-translate-key="chooseYourGift">اختر هديتك </h2>
            <div class="categories-grid">
                <button class="category-item" onclick="redirectToProducts('بوكس')">
                    <i class="fas fa-box"></i> <span data-translate-key="box">بوكس</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('دب')">
                    <i class="fas fa-dog"></i> <span data-translate-key="bear">دب</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('هدايا')">
                    <i class="fas fa-gift"></i> <span data-translate-key="gifts">هدايا</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('شنطة هدايا')">
                    <i class="fas fa-shopping-bag"></i> <span data-translate-key="giftBag">شنطة هدايا</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('كاسات')">
                    <i class="fas fa-glass-cheers"></i> <span data-translate-key="glasses">كاسات</span>
                </button>
                <button class="category-item" onclick="redirectToProducts('بالونات')">
                    <i class="fas fa-star"></i> <span data-translate-key="balloons">بالونات</span>
                </button>
            </div>
        </section>
<!-- 
        <section class="categories-section">
            <div class="categories-grid">
                <button class="category-item" onclick="redirectToStoreWithFilter('بوكس ورد + شوكولاتة')">
                    <span data-translate-key="roseChocBox">بوكس ورد + شوكولاتة</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('باقة ورد')">
                    <span data-translate-key="roseBouquet">باقة ورد</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('بوكس ورد شوكولاتة')">
                    <span data-translate-key="roseChocBoxAlt">بوكس ورد شوكولاتة</span>
                </button>
                <button class="category-item" onclick="redirectToStoreWithFilter('بوكس ورد')">
                    <span data-translate-key="roseBox">بوكس ورد</span>
                </button>
            </div>
        </section> -->

        <section class="best-sellers-section">
            <h2 data-translate-key="bestSellersTitle">الأكثر مبيعًا</h2>
            <div class="special-products-section">

                <div class="loading-spinner" id="loadingSpinner"></div>
                <div id="message" class="message"></div>
                <div class="products-grid" id="productsGrid">
                </div>
            </div>

            <div id="toastMessage" class="toast-message"></div>

        </section>

    </main>


<!-- ##################################################################################################### -->
    <footer class="site-footer">
        <div class="social-links">
            <a href="https://www.facebook.com/Techno.Science.TC"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.facebook.com/Techno.Science.TC"><i class="fab fa-instagram"></i></a>
            <a href="https://www.facebook.com/Techno.Science.TC"><i class="fab fa-tiktok"></i></a>
            <a href="https://wa.me/0114182463"><i class="fab fa-whatsapp"></i></a>
        </div>
        <p data-translate-key="allRightsReserved">© 2025 Techno Scince. All rights reserved.</p>
    </footer>
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item active">
            <i class="fas fa-home"></i>
            <span data-translate-key="home">الرئيسية</span>
        </a>
        <a href="./clint/user/wishlist.html" class="nav-item">
            <i class="fas fa-heart"></i>
            <span data-translate-key="wishlist">الإعجابات</span>
        </a>
        <a href="./clint/user/cart.html" class="nav-item">
            <i class="fas fa-shopping-basket"></i>
            <span data-translate-key="cart">السلة</span>
        </a>
        <a href="./clint/user/view-products.html" class="nav-item">
            <i class="fas fa-store"></i>
            <span data-translate-key="store">المتجر</span>
        </a>
        <button class="nav-item hamburger-menu-btn">
            <i class="fas fa-bars"></i>
            <span data-translate-key="menu">القائمة</span>
        </button>
    </nav>
    <div class="side-menu">
        <h1 data-translate-key="brandName"> زهور الربيع </h1>
        <br><br><br><br><br>
        <ul>
            <li><a href="./clint/user/about.html" data-translate-key="aboutUs">من نحن</a></li>
            <li><a href="./clint/user/add-feedback.html" data-translate-key="shareFeedback">شاركنا برأيك</a></li>
            <li><a href="./clint/user/view-products.html" data-translate-key="completeOrder">أكمل طلبك</a></li>
            <li><a href="./clint/admin/admin-dashboard.html" data-translate-key="adminLogin">تسجيل دخول المدير</a></li>
            <li><a href="./server/static/Alamanii Flowers.apk" download data-translate-key="downloadApp" class="download-app-link">
             <i class="fas fa-download"></i>   تنزيل التطبيق للاندرويد   </a></li>
             <li><button id="language-switcher" class="lang-switcher">EN / عربي</button></li>
        </ul>
        <br><br><br><br><br>
        <button class="close-side-menu" data-translate-key="close">close</button>
    </div>
<!-- ##################################################################################################### -->

    <script src="./server/script.js"></script>
    <script src="./server/translate.js"></script> <script>
        // الدالة الموجودة بالفعل لأزرار الفئات العادية (إذا كانت موجودة)
        function redirectToProducts(categoryValue) {
            window.location.href = `./clint/user/category-products.html?category=${encodeURIComponent(categoryValue)}`;
        }

        // الدالة الجديدة لأزرار العروض الخاصة
        function redirectToStoreWithFilter(occasionValue) {
            window.location.href = `./clint/user/view-products.html?occasion=${encodeURIComponent(occasionValue)}`;
        }

        // هنا كود الـ JavaScript الخاص بالكاروسيل (احتفظ به كما هو أو أضفه لو لم يكن موجودًا)
        const offerSlides = document.querySelectorAll('.offer-slide');
        const indicators = document.querySelectorAll('.indicator');
        let currentSlide = 0;

        function showSlide(index) {
            offerSlides.forEach((slide, i) => {
                slide.classList.remove('active');
                indicators[i].classList.remove('active');
                if (i === index) {
                    slide.classList.add('active');
                    indicators[i].classList.add('active');
                }
            });
            currentSlide = index;
        }

        indicators.forEach(indicator => {
            indicator.addEventListener('click', () => {
                const slideIndex = parseInt(indicator.dataset.slide);
                showSlide(slideIndex);
            });
        });

        setInterval(() => {
            currentSlide = (currentSlide + 1) % offerSlides.length;
            showSlide(currentSlide);
        }, 5000);

        showSlide(0);
    </script>
    <script>
        // *** استبدل هذا بـ URL تطبيق الويب الخاص بك من Google Apps Script ***
        const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbz3X1nWtO_iyoGiUQm1YMLwSoiZYKEP0bdpO_vyQbfZRZLcezr3vJ0wdQy232ev-do/exec';

        const productsGrid = document.getElementById('productsGrid');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const messageDiv = document.getElementById('message');
        const toastMessage = document.getElementById('toastMessage');

        // الدوال الأساسية للترجمة (يجب أن تكون موجودة في translations.js أو في سكربت منفصل يتم تحميله أولاً)
        // دالة مساعدة للحصول على نص مترجم، مع دعم المتغيرات
        function getTranslatedText(key, replacements = {}) {
            // تأكد أن `translations` و `currentLang` معرفين في نطاق هذا السكريبت
            const lang = localStorage.getItem('lang') || 'ar'; // استخدم اللغة الحالية المحفوظة
            let text = (translations[lang] && translations[lang][key]) ? translations[lang][key] : key; // ارجع المفتاح لو لم توجد ترجمة
            for (const placeholder in replacements) {
                if (replacements.hasOwnProperty(placeholder)) {
                    text = text.replace(`{${placeholder}}`, replacements[placeholder]);
                }
            }
            return text;
        }

        // دوال مساعدة لإظهار/إخفاء Spinner والرسائل
        function showSpinner() {
            loadingSpinner.style.display = 'block';
            productsGrid.innerHTML = ''; // مسح المنتجات عند التحميل
            messageDiv.textContent = '';
            messageDiv.className = 'message';
        }

        function hideSpinner() {
            loadingSpinner.style.display = 'none';
        }

        // تعديل دالة showMessage لاستخدام الترجمة
        const originalShowMessage = showMessage; // حفظ الدالة الأصلية إذا كانت موجودة في نطاق أعلى
        function showMessage(key, type, replacements = {}) {
            const message = getTranslatedText(key, replacements);
            messageDiv.textContent = message;
            messageDiv.className = `message ${type}`;
        }

        // --- دالة لإظهار رسالة "Toast" ---
        // تعديل دالة showToast لاستخدام الترجمة
        const originalShowToast = showToast; // حفظ الدالة الأصلية إذا كانت موجودة في نطاق أعلى
        function showToast(key, type = 'success', replacements = {}) {
            const message = getTranslatedText(key, replacements);
            toastMessage.textContent = message;
            toastMessage.className = `toast-message show ${type}`;
            setTimeout(() => {
                toastMessage.className = toastMessage.className.replace("show", "");
            }, 3000); // إخفاء بعد 3 ثوانٍ
        }

        // --- دالة لإضافة المنتج إلى السلة ---
        function addToCart(product) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingProductIndex = cart.findIndex(item => item.product_ID === product.product_ID);

            if (existingProductIndex > -1) {
                cart[existingProductIndex].quantity = (cart[existingProductIndex].quantity || 1) + 1;
                showToast('productQuantityUpdated', 'success', { productName: product.product_Name });
            } else {
                if (!product.product_ID) {
                    product.product_ID = Date.now().toString() + Math.random().toString(36).substring(2, 9);
                }
                product.quantity = 1;
                cart.push(product);
                showToast('productAddedToCart', 'success', { productName: product.product_Name });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            console.log('Cart:', cart);
        }

        // --- دالة لإضافة المنتج إلى قائمة الأمنيات (المفضلة) ---
        function addToWishlist(product) {
            let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

            const existingProductIndex = wishlist.findIndex(item => item.product_ID === product.product_ID);

            if (existingProductIndex === -1) {
                if (!product.product_ID) {
                    product.product_ID = Date.now().toString() + Math.random().toString(36).substring(2, 9);
                }
                wishlist.push(product);
                showToast('productAddedToWishlist', 'success', { productName: product.product_Name });
            } else {
                showToast('productAlreadyInWishlist', 'info', { productName: product.product_Name });
            }

            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            console.log('Wishlist:', wishlist);
        }

        // --- جلب جميع المنتجات من Google Sheet وفرزها واختيار الأربعة المطلوبة ---
        async function fetchAndDisplaySpecialProducts() {
            showSpinner();
            try {
                const response = await fetch(WEB_APP_URL);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();

                const validProducts = data.filter(p => !isNaN(parseFloat(p.product_prise_1)));

                if (validProducts.length < 4) {
                    showMessage('notEnoughProducts', 'error');
                    return;
                }

                validProducts.sort((a, b) => parseFloat(a.product_prise_1) - parseFloat(b.product_prise_1));

                const cheapestTwo = validProducts.slice(0, 2);

                const sortedByPriceDesc = [...validProducts].sort((a, b) => parseFloat(b.product_prise_1) - parseFloat(a.product_prise_1));
                const mostExpensiveTwo = sortedByPriceDesc.slice(0, 2);

                const specialProducts = [];

                cheapestTwo.forEach(p => specialProducts.push(p));

                mostExpensiveTwo.forEach(p => {
                    if (!specialProducts.some(sp => sp.product_ID === p.product_ID)) {
                        specialProducts.push(p);
                    }
                });

                let finalProducts = specialProducts.slice(0, 4);

                let i = 0;
                while (finalProducts.length < 4 && i < validProducts.length) {
                    const product = validProducts[i];
                    if (!finalProducts.some(fp => fp.product_ID === product.product_ID)) {
                        finalProducts.push(product);
                    }
                    i++;
                }

                displaySelectedProducts(finalProducts);

            } catch (error) {
                showMessage('failedToFetchProducts', 'error', { errorMessage: error.message });
                console.error('Error fetching special products:', error);
            } finally {
                hideSpinner();
            }
        }

        // --- عرض المنتجات المختارة ---
        function displaySelectedProducts(productsToDisplay) {
            productsGrid.innerHTML = '';
            messageDiv.textContent = '';

            if (productsToDisplay.length === 0) {
                productsGrid.innerHTML = `<p class="no-products-message">${getTranslatedText('noProductsMessage')}</p>`;
                return;
            }

            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';

                const imageUrl = product.product_image || 'https://via.placeholder.com/200?text=No+Image';

                let pricesHtml = '';
                if (product.product_prise_2 && product.product_prise_1) {
                    pricesHtml += `<p class="old-price">${product.product_prise_2}</p>`;
                    pricesHtml += `<p class="current-price">${product.product_prise_1}</p>`;
                } else if (product.product_prise_1) {
                    pricesHtml += `<p class="current-price">${product.product_prise_1}</p>`;
                }

                productCard.innerHTML = `
                    <img src="${imageUrl}" alt="${product.product_Name}">
                    <h3>${product.product_Name}</h3>
                    <p style="font-size: 0.6em;">${product.product_type_2 || getTranslatedText('noDetails')} || ${product.product_suitable || getTranslatedText('noDetails')}</p>
                    <div class="prices-container">
                        ${pricesHtml}
                    </div>
                    <div class="actions">
                        <button class="add-to-cart-btn"><i class="fas fa-shopping-cart"></i> ${getTranslatedText('addToCart')}</button>
                        <button class="add-to-wishlist-btn"><i class="fas fa-heart"></i> ${getTranslatedText('addToWishlist')}</button>
                    </div>
                `;

                const addToCartBtn = productCard.querySelector('.add-to-cart-btn');
                const addToWishlistBtn = productCard.querySelector('.add-to-wishlist-btn');

                addToCartBtn.addEventListener('click', () => addToCart(product));
                addToWishlistBtn.addEventListener('click', () => addToWishlist(product));

                productsGrid.appendChild(productCard);
            });
        }

        // --- عند تحميل الصفحة، جلب وعرض المنتجات المميزة فقط ---
        document.addEventListener('DOMContentLoaded', fetchAndDisplaySpecialProducts);
    </script>
    <script>
        // هذا الجزء من الكود يجب أن يكون بعد تحميل الترجمات لأن الدوال تستخدم getTranslatedText
        const languageSwitcher = document.getElementById('language-switcher');
        let currentLang = localStorage.getItem('lang') || 'ar'; // اللغة الافتراضية

        function applyTranslation(lang) {
            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.dataset.translateKey;
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            if (lang === 'ar') {
                languageSwitcher.textContent = 'EN / عربي';
            } else {
                languageSwitcher.textContent = 'عربي / EN';
            }

            document.documentElement.setAttribute('lang', lang);
            if (lang === 'ar') {
                document.body.style.direction = 'rtl';
            } else {
                document.body.style.direction = 'ltr';
            }
        }

        languageSwitcher.addEventListener('click', () => {
            currentLang = (currentLang === 'ar' ? 'en' : 'ar');
            localStorage.setItem('lang', currentLang);
            location.reload(); // إعادة تحميل الصفحة لتطبيق التغييرات
        });

        // تطبيق اللغة عند تحميل الصفحة لأول مرة
        applyTranslation(currentLang);


        function redirectToProducts(category) {
            let targetParam;
            let paramValue;

            if (category === 'ورد صناعي' || category === 'ورد طبيعي' || category === 'ورد فراشات' || category === 'ورد ساتان' || category === 'مجففات') {
                targetParam = 'productType2';
                paramValue = category;
            } else if (category === 'بوكس' || category === 'دب' || category === 'هدايا' || category === 'شنطة هدايا' || category === 'كاسات' || category === 'بالونات') {
                targetParam = 'productType1';
                paramValue = 'اكسسوارات'; // افتراض أن هذه الفئات تندرج تحت "اكسسوارات" في Google Sheet
            } else {
                // فئة غير معروفة، لا تقوم بفلترة
                window.location.href = `./clint/user/view-products.html`;
                return;
            }

            window.location.href = `./clint/user/view-products.html?${targetParam}=${encodeURIComponent(paramValue)}`;
        }
    </script>

</body>
</html>



